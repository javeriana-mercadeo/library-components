@use '@styles/autoload' as *;

.program-data-video {
  display: flex;
  align-items: center;

  // Mobile First - Layout vertical por defecto
  .program-container {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
    align-items: center;
    justify-content: center;
    padding: var(--spacing-lg) var(--spacing-md);
  }

  // Contenido del programa
  .program-content {
    width: 100%;
    max-width: 100%;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    text-align: center;

    &__faculty {
      @include text-style(var(--font-size-small), var(--font-weight-medium));
      color: var(--primary-600);
      margin-bottom: var(--spacing-xs);
    }

    &__title {
      @include text-style(var(--font-size-title), var(--font-weight-bold));
      color: var(--neutral-200);
      line-height: 1.2;
      margin: 0 0 var(--spacing-sm) 0;

      .highlight {
        color: var(--primary-600);
      }
    }

    &__snies {
      @include text-style(var(--font-size-small), var(--font-weight-regular));
      color: var(--neutral-500);
      margin-bottom: var(--spacing-sm);
    }

    &__description {
      @include text-style(var(--font-size-paragraph), var(--font-weight-regular));
      color: var(--neutral-400);
      line-height: 1.6;
      margin-bottom: var(--spacing-lg);

      strong {
        color: var(--neutral-200);
        font-weight: var(--font-weight-medium);
      }
    }
  }

  // ═══════════════════════════════════════════════════════════════
  // VIDEO SIMPLIFICADO SIN FRANJAS NEGRAS
  // ═══════════════════════════════════════════════════════════════
  .program-video {
    width: 100%;
    max-width: 100%;
    position: relative;
    border-radius: var(--border-radius-lg);
    overflow: hidden;
    background: var(--neutral-900);

    // Mobile: aspect ratio 16:9 (horizontal)
    aspect-ratio: 16 / 9;

    .video-iframe {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: 100%;
      border: none;

      // Centrar y escalar para llenar completamente sin franjas
      transform: translate(-50%, -50%);

      // Para videos 16:9 en contenedor 16:9 - ajuste perfecto
      object-fit: cover;

      // Optimizaciones de rendimiento
      will-change: auto;
      backface-visibility: hidden;

      // Evitar interacción del usuario
      pointer-events: none;

      // Transición suave al cargar
      opacity: 0;
      transition: opacity 0.5s ease-in-out;

      &[src]:not([src='']) {
        opacity: 1;
      }
    }

    // Overlay sutil para mejorar legibilidad si hay texto encima
    &::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.1);
      pointer-events: none;
      z-index: 1;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    &:hover::after {
      opacity: 1;
    }
  }

  // Detalles del programa
  .program-details {
    width: 100%;
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-md);
    margin-top: var(--spacing-lg);

    &__item {
      display: flex;
      align-items: flex-start;
      gap: var(--spacing-sm);
    }

    &__icon {
      flex-shrink: 0;
      width: 40px;
      height: 40px;
      background: var(--primary-600);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: var(--icon-size-md);
    }

    &__content {
      flex: 1;
      min-width: 0;
    }

    &__label {
      @include text-style(var(--font-size-small), var(--font-weight-regular));
      color: var(--neutral-500);
      margin-bottom: rem(2px);
      display: block;
    }

    &__value {
      @include text-style(var(--font-size-paragraph), var(--font-weight-bold));
      color: var(--neutral-200);
      margin: 0;
    }

    // Item especial para fechas
    &__dates {
      .dates-content {
        display: flex;
        flex-direction: column;
        gap: rem(4px);
        margin-top: rem(4px);

        .date-item {
          @include text-style(var(--font-size-paragraph), var(--font-weight-regular));
          color: var(--neutral-200);

          .period {
            font-weight: var(--font-weight-bold);
            color: var(--neutral-200);
          }
        }
      }
    }
  }

  // Link de inscripción
  .enrollment-section {
    width: 100%;
    margin-top: var(--spacing-lg);

    .enrollment-link {
      @include text-style(var(--font-size-paragraph), var(--font-weight-regular));
      color: var(--primary-600);
      text-decoration: none;
      display: block;
      margin-bottom: var(--spacing-md);

      &:hover {
        text-decoration: underline;
      }
    }

    .note {
      @include text-style(var(--font-size-small), var(--font-weight-regular));
      color: var(--neutral-400);
      font-style: italic;
      margin: 0;
    }
  }

  // ═══════════════════════════════════════════════════════════════
  // TABLET Y DESKTOP - LAYOUT GRID CON VIDEO VERTICAL
  // ═══════════════════════════════════════════════════════════════
  @include responsive($breakpoint-md) {
    padding: var(--spacing-xl);

    .program-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: rem(66px);
      max-width: $max-width;
      margin: 0 auto;
      align-items: start;
    }

    .program-content {
      text-align: left;

      &__title {
        @include text-style(var(--font-size-principal-title), var(--font-weight-bold));
        line-height: 1.2;
      }
    }

    // Desktop: aspect ratio 9:16 (vertical) para mejor aprovechamiento
    .program-video {
      aspect-ratio: 9 / 16;
      height: auto;
      align-self: stretch;
      grid-row: 1 / -1;

      .video-iframe {
        // Para videos 16:9 en contenedor 9:16 necesitamos escalar
        // Calcular el scale para llenar completamente
        width: 177.78%; // (16/9) / (9/16) * 100 = 177.78%
        height: 177.78%;

        // Centrar el video escalado
        transform: translate(-50%, -50%);

        // Alternativa: usar diferentes escalas según el contenido del video
        // Si el video tiene contenido importante en los bordes, usar:
        // width: 120%;
        // height: 120%;
      }
    }

    .program-details {
      grid-template-columns: repeat(2, 1fr);
      gap: var(--spacing-lg);
      margin-top: var(--spacing-xl);

      &__dates {
        grid-column: 1 / -1;
      }
    }

    .enrollment-section {
      margin-top: var(--spacing-lg);
    }
  }

  // ═══════════════════════════════════════════════════════════════
  // DESKTOP GRANDE - AJUSTES FINOS
  // ═══════════════════════════════════════════════════════════════
  @include responsive($breakpoint-lg) {
    .program-details {
      gap: rem(32px);
    }

    // Opcional: ajuste más preciso para videos con contenido específico
    .program-video .video-iframe {
      // Si el video tiene mucho contenido importante en los bordes:
      width: 150%;
      height: 150%;

      // O si queremos un crop más conservador:
      // width: 130%;
      // height: 130%;
    }
  }

  // ═══════════════════════════════════════════════════════════════
  // OPTIMIZACIONES DE RENDIMIENTO
  // ═══════════════════════════════════════════════════════════════
  .program-video {
    // GPU acceleration
    transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;

    // Contenedor optimizado
    contain: layout style paint;

    // Mejorar rendering en móviles
    @media (max-width: $breakpoint-md) {
      .video-iframe {
        transform: translate(-50%, -50%) translate3d(0, 0, 0);
      }
    }
  }
}

// ═══════════════════════════════════════════════════════════════
// RESPONSIVE EXTREMO - MÓVILES PEQUEÑOS
// ═══════════════════════════════════════════════════════════════
@media (max-width: 375px) {
  .program-data-video {
    padding: var(--spacing-md) var(--spacing-sm);

    .program-video {
      border-radius: var(--border-radius-md);
    }
  }
}

// ═══════════════════════════════════════════════════════════════
// MEJORAS DE ACCESIBILIDAD
// ═══════════════════════════════════════════════════════════════
@media (prefers-reduced-motion: reduce) {
  .program-video {
    .video-iframe {
      transition: none;
    }

    &::after {
      transition: none;
    }
  }
}

// ═══════════════════════════════════════════════════════════════
// MODO ALTO CONTRASTE
// ═══════════════════════════════════════════════════════════════
@media (prefers-contrast: high) {
  .program-video {
    border: rem(2px) solid var(--neutral-200);

    &::after {
      background: rgba(0, 0, 0, 0.2);
    }
  }
}
